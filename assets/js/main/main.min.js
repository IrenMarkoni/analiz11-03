"use strict";

if ($(window).width() > 764) {
  var e = !1;
  $(".header__nav-link_dropdown").hover(function (t) {
    t.preventDefault(), $(this).parent().find(".header__dropdown-list").addClass("open"), e = !0;
  }, function () {
    setTimeout(function () {
      e || $(".header__dropdown-list").removeClass("open");
    }, 500), e = !1;
  }), $(".header__dropdown-list").hover(function () {
    e = !0;
  }, function () {
    e = !1, setTimeout(function () {
      e || $(".header__dropdown-list").removeClass("open");
    }, 500);
  });
}

function getStyles(e) {
  return window.getComputedStyle(e, null);
}

function anim() {
  document.querySelectorAll(".anim").forEach(function (e) {
    var t = e.getBoundingClientRect().top;
    var n = ["animmask", "animslide", "animslidefast", "animslideup", "animslideleft", "animslidebig", "animgraph"];
    var i;
    i = window.innerWidth > 650 ? 120 : 30, e.classList.contains("animgraph") && (i = 0), t < window.innerHeight - i && (n.forEach(function (t) {
      e.classList.contains(t) && e.classList.remove(t + "hide");
    }), e.classList.forEach(function (t) {
      var i = 0;
      t.includes("animdalay") && (i = parseInt(t.replace("animdalay", "")));
      var o = 1e3 * parseFloat(getStyles(e).transitionDuration);
      setTimeout(function () {
        var _e$classList;

        (_e$classList = e.classList).remove.apply(_e$classList, ["animdalay" + i, "anim"].concat(n));
      }, i + o);
    }));
  });
}

function scroll() {
  anim();
}

function scrollWidth() {
  var e = document.createElement("div");
  e.style.height = "50px", e.style.width = "50px", e.style.overflowY = "scroll", document.body.appendChild(e);
  var t = e.offsetWidth - e.clientWidth;
  return e.remove(), t;
}

function bodyFixed() {
  $("body").css({
    "padding-right": scrollWidth() + "px",
    overflow: "hidden"
  });
}

function clearInlineStyle(e) {
  e.removeAttr("style");
}

function opensuccess() {
  setTimeout(function () {
    $(".modal").removeClass("active"), $(".js-overlay-modal").addClass("active"), setTimeout(function () {
      $(".modal[data-modal=thanks-modal]").addClass("active");
    }, 10);
  }, 200);
}

function a(e) {
  e.attr("disabled", "disabled").css("width", e.outerWidth() + "px").css("height", e.outerHeight() + "px").html('<div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>');
}

function s(e, t) {
  e.removeAttr("disabled").removeAttr("style").html(t);
}

function d(e, t) {
  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  return fetch(e, {
    method: "POST",
    body: t,
    headers: n
  });
}

function l(e) {
  return e.replace(/\D+/g, "");
}

$(window).width() < 764 && ($(".burger").on("click", function () {
  $(this).toggleClass("active"), $(".header__menu").toggleClass("mobile-open"), $("body").toggleClass("no-scroll");
}), $(".header__nav-link_dropdown").on("click", function (e) {
  e.preventDefault(), $(this).parent().find(".header__dropdown-list").toggleClass("open").slideToggle(400), isSubMenuOpen = !0;
})), document.querySelector(".banner__slider") && new Swiper(".banner__slider", {
  speed: 400,
  slidesPerView: 1,
  pagination: {
    el: ".banner__pagination",
    clickable: !0
  },
  navigation: {
    nextEl: ".banner__slider-next",
    prevEl: ".banner__slider-prev"
  }
}), $(document).ready(function () {
  $(".services__item-content").each(function () {
    var e = $(this).find(".services__item-title").height(),
        t = $(this).parent(".services__item").height() - e - 30;
    $(this).css({
      top: "".concat(t, "px")
    });
  });
}), $("input[name=phone]").inputmask("+7 (999) 999-99-99"), window.addEventListener("load", function () {
  setTimeout(function () {
    anim();
  }, 50);
}), window.addEventListener("resize", function () {
  anim();
}), window.addEventListener("scroll", function () {
  scroll();
}), document.addEventListener("DOMContentLoaded", function () {
  var e = document.querySelectorAll(".openmodal"),
      t = document.querySelector(".js-overlay-modal"),
      n = document.querySelectorAll(".modal__close");
  e.forEach(function (e) {
    e.addEventListener("click", function (e) {
      e.preventDefault();
      var n = this.getAttribute("data-modal");
      document.querySelector('.modal[data-modal="' + n + '"]').classList.add("active"), t.classList.add("active"), bodyFixed();
    });
  }), n.forEach(function (e) {
    e.addEventListener("click", function (e) {
      this.closest(".modal").classList.remove("active"), t.classList.remove("active"), clearInlineStyle($("body"));
    });
  }), document.body.addEventListener("keyup", function (e) {
    27 == e.keyCode && (document.querySelector(".modal.active").classList.remove("active"), document.querySelector(".overlay").classList.remove("active"), clearInlineStyle($("body")));
  }, !1), t.addEventListener("click", function () {
    document.querySelector(".modal.active").classList.remove("active"), this.classList.remove("active"), clearInlineStyle($("body"));
  });
}), $("form").on("submit", function (e) {
  e.preventDefault();
  var t = $(this),
      n = t.find("button"),
      i = t.find("button").html();
  var o = new FormData(e.target);
  a(n), d("https://jsonplaceholder.typicode.com/users", o).then(function (e) {
    return e.json();
  }).then(function (e) {
    s(n, i), opensuccess(), t.trigger("reset");
  })["catch"](function (e) {
    return console.log(e);
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyIkIiwid2luZG93Iiwid2lkdGgiLCJpc1N1Yk1lbnVPcGVuIiwiaG92ZXIiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwidGhpcyIsInBhcmVudCIsImZpbmQiLCJhZGRDbGFzcyIsInNldFRpbWVvdXQiLCJyZW1vdmVDbGFzcyIsImdldFN0eWxlcyIsImVsZW0iLCJnZXRDb21wdXRlZFN0eWxlIiwiYW5pbSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJ0b3AiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJjbGFzc0xpc3QiLCJkYWxheXB4IiwiaW5uZXJXaWR0aCIsImNvbnRhaW5zIiwiaW5uZXJIZWlnaHQiLCJjbCIsInJlbW92ZSIsIndvcmRDbGFzcyIsImRlbGF5IiwiaW5jbHVkZXMiLCJwYXJzZUludCIsInJlcGxhY2UiLCJkdXJhdGlvbiIsInBhcnNlRmxvYXQiLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJzY3JvbGwiLCJzY3JvbGxXaWR0aCIsImRpdiIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsImhlaWdodCIsIm92ZXJmbG93WSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsIm9mZnNldFdpZHRoIiwiY2xpZW50V2lkdGgiLCJib2R5Rml4ZWQiLCJjc3MiLCJvdmVyZmxvdyIsImNsZWFySW5saW5lU3R5bGUiLCJlbGVtZW50IiwicmVtb3ZlQXR0ciIsIm9wZW5zdWNjZXNzIiwiYSIsImUiLCJhdHRyIiwib3V0ZXJXaWR0aCIsIm91dGVySGVpZ2h0IiwiaHRtbCIsInMiLCJ0IiwiZCIsImkiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJsIiwib24iLCJ0b2dnbGVDbGFzcyIsInNsaWRlVG9nZ2xlIiwicXVlcnlTZWxlY3RvciIsIlN3aXBlciIsInNwZWVkIiwic2xpZGVzUGVyVmlldyIsInBhZ2luYXRpb24iLCJlbCIsImNsaWNrYWJsZSIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJyZWFkeSIsImVhY2giLCJ0aXRsZSIsImlucHV0bWFzayIsImFkZEV2ZW50TGlzdGVuZXIiLCJtb2RhbEJ1dHRvbnMiLCJvdmVybGF5IiwiY2xvc2VCdXR0b25zIiwiaXRlbSIsIm1vZGFsSWQiLCJnZXRBdHRyaWJ1dGUiLCJhZGQiLCJjbG9zZXN0Iiwia2V5Q29kZSIsIm4iLCJyIiwiRm9ybURhdGEiLCJ0YXJnZXQiLCJ0aGVuIiwianNvbiIsInRyaWdnZXIiLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUdBLENBQUFBLENBQUVDLE1BQUZELENBQUFBLENBQVVFLEtBQVZGLEtBQW9CLEdBQXZCLEVBQTRCO0VBQzVCLElBQUlHLENBQUFBLEdBQUFBLENBQWdCLENBQXBCO0VBQ0FILENBQUFBLENBQUUsNEJBQUZBLENBQUFBLENBQWdDSSxLQUFoQ0osQ0FBc0MsVUFBU0ssQ0FBVCxFQUFTQTtJQUM1Q0EsQ0FBQUEsQ0FBTUMsY0FBTkQsSUFDRkwsQ0FBQUEsQ0FBRU8sSUFBRlAsQ0FBQUEsQ0FBUVEsTUFBUlIsR0FBaUJTLElBQWpCVCxDQUFzQix3QkFBdEJBLEVBQWdEVSxRQUFoRFYsQ0FBeUQsTUFBekRBLENBREVLLEVBRUZGLENBQUFBLEdBQUFBLENBQWdCLENBRmRFO0VBRWMsQ0FIakJMLEVBS0csWUFBQTtJQUNEVyxVQUFBQSxDQUFXLFlBQUE7TUFDTlIsQ0FBQUEsSUFDSkgsQ0FBQUEsQ0FBRSx3QkFBRkEsQ0FBQUEsQ0FBNEJZLFdBQTVCWixDQUF3QyxNQUF4Q0EsQ0FESUc7SUFDb0MsQ0FGekNRLEVBSUUsR0FKRkEsQ0FBQUEsRUFLRFIsQ0FBQUEsR0FBQUEsQ0FBZ0IsQ0FMZlE7RUFLZSxDQVhqQlgsR0FjQUEsQ0FBQUEsQ0FBRSx3QkFBRkEsQ0FBQUEsQ0FBNEJJLEtBQTVCSixDQUFrQyxZQUFBO0lBQ2pDRyxDQUFBQSxHQUFBQSxDQUFnQixDQUFoQkE7RUFBZ0IsQ0FEakJILEVBRUcsWUFBQTtJQUNGRyxDQUFBQSxHQUFBQSxDQUFnQixDQUFo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TFZPLENBREZSO0FBTThCQyxDQWRqQ3hELENBcE9FQSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImlmKCQod2luZG93KS53aWR0aCgpID4gNzY0KSB7XHJcbmxldCBpc1N1Yk1lbnVPcGVuID0gZmFsc2VcclxuJChcIi5oZWFkZXJfX25hdi1saW5rX2Ryb3Bkb3duXCIpLmhvdmVyKGZ1bmN0aW9uKGV2ZW50KXtcclxuXHQgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0JCh0aGlzKS5wYXJlbnQoKS5maW5kKFwiLmhlYWRlcl9fZHJvcGRvd24tbGlzdFwiKS5hZGRDbGFzcyhcIm9wZW5cIilcclxuXHRpc1N1Yk1lbnVPcGVuID0gdHJ1ZVxyXG5cclxufSwgZnVuY3Rpb24gKCkge1xyXG5cdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcblx0XHRpZiAoIWlzU3ViTWVudU9wZW4pIHtcclxuXHRcdFx0JCgnLmhlYWRlcl9fZHJvcGRvd24tbGlzdCcpLnJlbW92ZUNsYXNzKCdvcGVuJylcclxuXHRcdH1cclxuXHR9LCA1MDApXHJcblx0aXNTdWJNZW51T3BlbiA9IGZhbHNlXHJcbn0pXHJcblxyXG4kKCcuaGVhZGVyX19kcm9wZG93bi1saXN0JykuaG92ZXIoZnVuY3Rpb24gKCkge1xyXG5cdGlzU3ViTWVudU9wZW4gPSB0cnVlXHJcbn0sIGZ1bmN0aW9uICgpIHtcclxuXHRpc1N1Yk1lbnVPcGVuID0gZmFsc2VcclxuXHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuXHRcdGlmICghaXNTdWJNZW51T3Blbikge1xyXG4gICAgICAkKCcuaGVhZGVyX19kcm9wZG93bi1saXN0JykucmVtb3ZlQ2xhc3MoJ29wZW4nKVxyXG4gICAgfVxyXG5cdH0sIDUwMClcclxufSlcclxufVxyXG5pZigkKHdpbmRvdykud2lkdGgoKSA8IDc2NCkge1xyXG4kKFwiLmJ1cmdlclwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XHJcblx0JCh0aGlzKS50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKVxyXG5cdCQoXCIuaGVhZGVyX19tZW51XCIpLnRvZ2dsZUNsYXNzKFwibW9iaWxlLW9wZW5cIik7XHJcblx0JChcImJvZHlcIikudG9nZ2xlQ2xhc3MoXCJuby1zY3JvbGxcIik7XHJcblxyXG59KVxyXG4kKFwiLmhlYWRlcl9fbmF2LWxpbmtfZHJvcGRvd25cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbihldmVudCl7XHJcbiBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdCQodGhpcykucGFyZW50KCkuZmluZChcIi5oZWFkZXJfX2Ryb3Bkb3duLWxpc3RcIikudG9nZ2xlQ2xhc3MoXCJvcGVuXCIpLnNsaWRlVG9nZ2xlKDQwMClcclxuXHRpc1N1Yk1lbnVPcGVuID0gdHJ1ZVxyXG59KVxyXG59XHJcblxyXG5cclxuXHJcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJhbm5lcl9fc2xpZGVyXCIpKSB7XHJcblx0bmV3IFN3aXBlcihcIi5iYW5uZXJfX3NsaWRlclwiLCB7XHJcblx0XHRzcGVlZDogNDAwLFxyXG5cdFx0c2xpZGVzUGVyVmlldzogMSxcclxuXHRcdC8vIGVmZmVjdDogXCJmbGlwXCIsXHJcblx0XHQvLyBhdXRvcGxheTogdHJ1ZSxcclxuXHRcdHBhZ2luYXRpb246IHsgZWw6IFwiLmJhbm5lcl9fcGFnaW5hdGlvblwiLCBjbGlja2FibGU6IHRydWUgfSxcclxuXHRcdG5hdmlnYXRpb246IHtcclxuXHRcdFx0bmV4dEVsOiBcIi5iYW5uZXJfX3NsaWRlci1uZXh0XCIsXHJcblx0XHRcdHByZXZFbDogXCIuYmFubmVyX19zbGlkZXItcHJldlwiLFxyXG5cdFx0fSxcclxuXHR9KTtcclxufVxyXG5cclxuXHJcblxyXG4vLyDRgdGH0LjRgtCw0LXRgiB0b3Ag0YMg0LHQu9C+0LrQvtCyINC/0YDQtdC40LzRg9GJ0LXRgdGCINCyINC30LDQstC40YHQuNC80L7RgdGC0Lgg0L7RgiDQstGL0YHQvtGC0Ysg0LfQsNCz0L7Qu9C+0LLQutCwINCx0LvQvtC60LBcclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcclxuJChcIi5zZXJ2aWNlc19faXRlbS1jb250ZW50XCIpLmVhY2goZnVuY3Rpb24oKXtcclxuXHRsZXQgdGl0bGUgPSAkKHRoaXMpLmZpbmQoXCIuc2VydmljZXNfX2l0ZW0tdGl0bGVcIikuaGVpZ2h0KCk7XHJcblxyXG5cdGxldCBoZWlnaHQgPSAkKHRoaXMpLnBhcmVudChcIi5zZXJ2aWNlc19faXRlbVwiKS5oZWlnaHQoKTtcclxuXHRsZXQgdG9wID0gaGVpZ2h0IC0gdGl0bGUgLSAzMDtcclxuJCh0aGlzKS5jc3Moe1widG9wXCI6IGAke3RvcH1weGB9KVxyXG59KVxyXG5cclxufSlcclxuXHJcblxyXG4vLyDQvNCw0YHQutC4INC90LAg0YLQtdC70LXRhNC+0L1cclxuICQoXCJpbnB1dFtuYW1lPXBob25lXVwiKS5pbnB1dG1hc2soXCIrNyAoOTk5KSA5OTktOTktOTlcIik7XHJcblxyXG5cclxuXHRcclxuLy8g0JDQvdC40LzQsNGG0LjRjyDQv9C70LDQstC90L7Qs9C+INC/0L7Rj9Cy0LvQtdC90LjRj1xyXG5mdW5jdGlvbiBnZXRTdHlsZXMoZWxlbSkge1xyXG5cdHJldHVybiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtLCBudWxsKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYW5pbSgpIHtcclxuXHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFuaW1cIikuZm9yRWFjaCgoZWxlbSkgPT4ge1xyXG5cdFx0bGV0IHRvcCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xyXG5cclxuXHRcdGNvbnN0IGNsYXNzTGlzdCA9IFtcclxuXHRcdFx0XCJhbmltbWFza1wiLFxyXG5cdFx0XHRcImFuaW1zbGlkZVwiLFxyXG5cdFx0XHRcImFuaW1zbGlkZWZhc3RcIixcclxuXHRcdFx0XCJhbmltc2xpZGV1cFwiLFxyXG5cdFx0XHRcImFuaW1zbGlkZWxlZnRcIixcclxuXHRcdFx0XCJhbmltc2xpZGViaWdcIixcclxuXHRcdFx0XCJhbmltZ3JhcGhcIixcclxuXHRcdF07XHJcblxyXG5cdFx0bGV0IGRhbGF5cHg7XHJcblx0XHRpZiAod2luZG93LmlubmVyV2lkdGggPiA2NTApIGRhbGF5cHggPSAxMjA7XHJcblx0XHRlbHNlIGRhbGF5cHggPSAzMDtcclxuXHJcblx0XHRpZiAoZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJhbmltZ3JhcGhcIikpIGRhbGF5cHggPSAwO1xyXG5cclxuXHRcdGlmICh0b3AgPCB3aW5kb3cuaW5uZXJIZWlnaHQgLSBkYWxheXB4KSB7XHJcblx0XHRcdGNsYXNzTGlzdC5mb3JFYWNoKChjbCkgPT4ge1xyXG5cdFx0XHRcdGlmIChlbGVtLmNsYXNzTGlzdC5jb250YWlucyhjbCkpIGVsZW0uY2xhc3NMaXN0LnJlbW92ZShjbCArIFwiaGlkZVwiKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRlbGVtLmNsYXNzTGlzdC5mb3JFYWNoKCh3b3JkQ2xhc3MpID0+IHtcclxuXHRcdFx0XHRsZXQgZGVsYXkgPSAwO1xyXG5cdFx0XHRcdGlmICh3b3JkQ2xhc3MuaW5jbHVkZXMoXCJhbmltZGFsYXlcIikpIHtcclxuXHRcdFx0XHRcdGRlbGF5ID0gcGFyc2VJbnQod29yZENsYXNzLnJlcGxhY2UoXCJhbmltZGFsYXlcIiwgXCJcIikpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRsZXQgZHVyYXRpb24gPSBwYXJzZUZsb2F0KGdldFN0eWxlcyhlbGVtKS50cmFuc2l0aW9uRHVyYXRpb24pICogMTAwMDtcclxuXHJcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRlbGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJhbmltZGFsYXlcIiArIGRlbGF5LCBcImFuaW1cIiwgLi4uY2xhc3NMaXN0KTtcclxuXHRcdFx0XHR9LCBkZWxheSArIGR1cmF0aW9uKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn1cclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKSA9PiB7XHJcblx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRhbmltKCk7XHJcblx0fSwgNTApO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIHNjcm9sbCgpIHtcclxuXHRhbmltKCk7XHJcblxyXG59XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCAoKSA9PiB7XHJcblx0YW5pbSgpO1xyXG5cclxufSk7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCAoKSA9PiB7XHJcblx0c2Nyb2xsKCk7XHJcbn0pO1xyXG5cclxuXHJcblxyXG4vLyAqINCS0YvRh9C40YHQu9GP0LXRgiDRiNC40YDQuNC90YMg0L/QvtC70L7RgdGLINC/0YDQvtC60YDRg9GC0LrQuFxyXG5mdW5jdGlvbiBzY3JvbGxXaWR0aCgpIHtcclxuXHRjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdGRpdi5zdHlsZS5oZWlnaHQgPSBcIjUwcHhcIjtcclxuXHRkaXYuc3R5bGUud2lkdGggPSBcIjUwcHhcIjtcclxuXHRkaXYuc3R5bGUub3ZlcmZsb3dZID0gXCJzY3JvbGxcIjtcclxuXHJcblx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpO1xyXG5cclxuXHRjb25zdCBzY3JvbGxXaWR0aCA9IGRpdi5vZmZzZXRXaWR0aCAtIGRpdi5jbGllbnRXaWR0aDtcclxuXHRkaXYucmVtb3ZlKCk7XHJcblx0cmV0dXJuIHNjcm9sbFdpZHRoO1xyXG59XHJcblxyXG4vLyAqINCj0LjRgNCw0LXRgiDQv9GA0L7QutGA0YPRgtC60YMg0YMgYm9keVxyXG5mdW5jdGlvbiBib2R5Rml4ZWQoKSB7XHJcblx0JChcImJvZHlcIikuY3NzKHtcclxuXHRcdFwicGFkZGluZy1yaWdodFwiOiBzY3JvbGxXaWR0aCgpICsgXCJweFwiLFxyXG5cdFx0b3ZlcmZsb3c6IFwiaGlkZGVuXCIsXHJcblx0fSk7XHJcbn1cclxuXHJcblxyXG5cclxuICBmdW5jdGlvbiBjbGVhcklubGluZVN0eWxlKGVsZW1lbnQpIHtcclxuICAgIGVsZW1lbnQucmVtb3ZlQXR0cihcInN0eWxlXCIpO1xyXG4gIH1cclxuXHJcbi8v0LzQvtC00LDQu9GM0L3Ri9C1INC+0LrQvdCwXHJcblxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKCkge1xyXG4gIHZhciBtb2RhbEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm9wZW5tb2RhbFwiKSxcclxuICAgIG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmpzLW92ZXJsYXktbW9kYWxcIiksXHJcbiAgICBjbG9zZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuXHJcbiAgbW9kYWxCdXR0b25zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdmFyIG1vZGFsSWQgPSB0aGlzLmdldEF0dHJpYnV0ZShcImRhdGEtbW9kYWxcIiksXHJcblx0XHRcdFx0XHRcdFxyXG4gICAgICAgIG1vZGFsRWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgICAnLm1vZGFsW2RhdGEtbW9kYWw9XCInICsgbW9kYWxJZCArICdcIl0nXHJcbiAgICAgICAgKTtcclxuICAgICAgbW9kYWxFbGVtLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxuXHRcdFx0XHRcdFx0Ym9keUZpeGVkKCk7XHJcbiAgICAgIFxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGNsb3NlQnV0dG9ucy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICB2YXIgcGFyZW50TW9kYWwgPSB0aGlzLmNsb3Nlc3QoXCIubW9kYWxcIik7XHJcblxyXG4gICAgICBwYXJlbnRNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgICBvdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcblx0XHRcdFx0XHRcdFx0XHRjbGVhcklubGluZVN0eWxlKCQoXCJib2R5XCIpKTtcclxuXHRcdFx0XHRcdFx0XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgXCJrZXl1cFwiLFxyXG4gICAgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgdmFyIGtleSA9IGUua2V5Q29kZTtcclxuXHJcbiAgICAgIGlmIChrZXkgPT0gMjcpIHtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLmFjdGl2ZVwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheVwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNsZWFySW5saW5lU3R5bGUoJChcImJvZHlcIikpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgZmFsc2VcclxuICApO1xyXG5cclxuICBvdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLmFjdGl2ZVwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG5cdFx0XHRcdFx0XHRjbGVhcklubGluZVN0eWxlKCQoXCJib2R5XCIpKTtcclxuICB9KTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBvcGVuc3VjY2Vzcygpe1xyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0XHRcdFx0JChcIi5tb2RhbFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKVxyXG4gICAgICAgICQoXCIuanMtb3ZlcmxheS1tb2RhbFwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICQoXCIubW9kYWxbZGF0YS1tb2RhbD10aGFua3MtbW9kYWxdXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIH0sIDEwKTtcclxuICAgIH0sIDIwMCk7XHJcbn1cclxuXHJcblxyXG5cdGZ1bmN0aW9uIGEoZSkge1xyXG5cdFx0XHRlLmF0dHIoXCJkaXNhYmxlZFwiLCBcImRpc2FibGVkXCIpXHJcblx0XHRcdFx0XHQuY3NzKFwid2lkdGhcIiwgZS5vdXRlcldpZHRoKCkgKyBcInB4XCIpXHJcblx0XHRcdFx0XHQuY3NzKFwiaGVpZ2h0XCIsIGUub3V0ZXJIZWlnaHQoKSArIFwicHhcIilcclxuXHRcdFx0XHRcdC5odG1sKCc8ZGl2IGNsYXNzPVwibGRzLWVsbGlwc2lzXCI+PGRpdj48L2Rpdj48ZGl2PjwvZGl2PjxkaXY+PC9kaXY+PGRpdj48L2Rpdj48L2Rpdj4nKTtcclxuXHR9XHJcblx0ZnVuY3Rpb24gcyhlLCB0KSB7XHJcblx0XHRcdGUucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpLnJlbW92ZUF0dHIoXCJzdHlsZVwiKS5odG1sKHQpO1xyXG5cdH1cclxuXHRmdW5jdGlvbiBkKGUsIHQsIGkgPSB7fSkge1xyXG5cdFx0XHRyZXR1cm4gZmV0Y2goZSwgeyBtZXRob2Q6IFwiUE9TVFwiLCBib2R5OiB0LCBoZWFkZXJzOiBpIH0pO1xyXG5cdH1cclxuXHRmdW5jdGlvbiBsKGUpIHtcclxuXHRcdFx0cmV0dXJuIGUucmVwbGFjZSgvXFxEKy9nLCBcIlwiKTtcclxuXHR9XHJcbi8vINCe0LHRgNCw0LHQvtGC0YfQuNC6INGE0L7RgNC80YtcclxuICQoXCJmb3JtXCIpLm9uKFwic3VibWl0XCIsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRjb25zdCB0ID0gJCh0aGlzKSxcclxuXHRcdFx0XHRpID0gdC5maW5kKFwiYnV0dG9uXCIpLFxyXG5cdFx0XHRcdG4gPSB0LmZpbmQoXCJidXR0b25cIikuaHRtbCgpO1xyXG5cdFx0XHRcdCBsZXQgbCA9ICExO1xyXG5cclxuXHRcdFx0XHRjb25zdCByID0gbmV3IEZvcm1EYXRhKGUudGFyZ2V0KTtcclxuXHRcdFx0XHRhKGkpLFxyXG5cdFx0XHRcdFx0XHRkKFwiaHR0cHM6Ly9qc29ucGxhY2Vob2xkZXIudHlwaWNvZGUuY29tL3VzZXJzXCIsIHIpXHJcblx0XHRcdFx0XHRcdFx0XHQudGhlbigoZSkgPT4gZS5qc29uKCkpXHJcblx0XHRcdFx0XHRcdFx0XHQudGhlbigoZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHMoaSwgbiksIG9wZW5zdWNjZXNzKCksIHQudHJpZ2dlcihcInJlc2V0XCIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdFx0XHRcdC5jYXRjaCgoZSkgPT4gY29uc29sZS5sb2coZSkpO1xyXG5cclxufSkiXX0=
